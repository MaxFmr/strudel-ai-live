# 🎛️ Strudel Live - Claude AI Music Generator

Real-time music generation interface using **Claude AI** to generate **Strudel** code (live coding audio).

![Version](https://img.shields.io/badge/version-1.0.0-green)
![License](https://img.shields.io/badge/license-MIT-blue)

**🌍 Languages:** [Français](README.md) | **English** | [Español](README.es.md)

## 🎵 What is this?

A minimalist web application that lets you create electronic music **in real-time** by describing what you want in natural language to Claude AI. The generated Strudel code is automatically loaded into the editor and played instantly.

**Features:**
- ✨ AI music generation (Claude)
- 🎹 Embedded Strudel interface
- 🔄 Real-time auto-update
- ✏️ Manual code editor
- 📱 Responsive design (mobile, tablet, desktop)
- 🚀 Ultra-lightweight (vanilla HTML/JS, no dependencies)

## 🚀 Installation & Usage

### Prerequisites

- A local web server (Python, Node.js, or other)
- A modern browser

### Quick Start

1. **Clone the project**
```bash
git clone https://github.com/MaxFmr/strudel-ai-live.git
cd strudel-ai-live
```

2. **Start a local server**

With Python:
```bash
python3 -m http.server 8000
```

With Node.js:
```bash
npx serve
```

3. **Open in browser**
```
http://localhost:8000
```

4. **Use the interface**
   - Click **PLAY ▶** in the Strudel editor
   - Ask Claude to generate music in Claude Code
   - Or click **✏️ Edit Code** to write Strudel code manually
   - Music updates automatically!

## 🎹 How to Generate Music

### With Claude Code

**Prerequisites:** [Claude Code](https://claude.com/claude-code) - Anthropic's AI code editor

#### 1. Claude Code Installation

If you don't have Claude Code yet:

1. Visit [claude.com/claude-code](https://claude.com/claude-code)
2. Download the app for your OS (Mac/Windows/Linux)
3. Install and launch Claude Code
4. Sign in with your Anthropic account

#### 2. Open Project in Claude Code

```bash
# From terminal in Claude Code
cd "path/to/strudel-ai-live"
```

Or use **File > Open Folder** and select the project folder.

#### 3. Usage - Simple Method

Once the local server is running and the interface is open in your browser:

**In Claude Code, simply type your musical prompts:**

```
generate a fast techno beat
```

```
add an acid bassline
```

```
create ambient melody with reverb
```

```
breakbeat jungle beat with bass and repetitive melody
```

Claude will **automatically**:
1. ✨ Understand your musical request
2. 🎵 Generate appropriate Strudel code
3. 💾 Write it to `pattern.js`
4. 🔄 The interface detects the change (every 0.5s)
5. 🎶 Code is loaded into Strudel and played instantly!

### Manual Editing

Click the **✏️ Edit Code** button in the interface to:
- Write or modify Strudel code directly
- Load the current pattern
- Apply changes in real-time

Perfect for:
- Quick tweaks
- Learning Strudel syntax
- Testing code snippets

### Complete Workflow

```
┌─────────────────┐
│  Claude Code    │
│  "generate a    │
│   techno beat"  │
└────────┬────────┘
         │
         ▼
    Generates
    Strudel code
         │
         ▼
┌────────────────┐
│  pattern.js    │
│  s("bd*4")     │
└────────┬───────┘
         │
         ▼
    Detection
    (500ms)
         │
         ▼
┌────────────────┐
│  Interface     │
│  Strudel.cc    │
│  ▶️ Music !    │
└────────────────┘
```

### Prompt Examples

```
"A minimal beat with kick on every beat"
→ s("bd ~ bd ~")

"Breakbeat jungle beat with bass and melody"
→ stack(
    s("bd*2 ~ bd ~ bd ~ ~ ~"),
    s("~ sn ~ sn"),
    s("[hh hh]*8"),
    note("c2 c2 g1 c2").s("sawtooth"),
    note("e4 g4 e4 c4").s("square")
  )

"Acid bassline"
→ note("c2 c3 c2 g2").s("sawtooth").lpf(sine.range(200,1200)).resonance(10)
```

## 📁 Project Structure

```
strudel-ai-live/
├── index.html          # Main interface (responsive)
├── pattern.js          # Strudel code generated by Claude
├── README.md           # French documentation
├── README.en.md        # English documentation
├── README.es.md        # Spanish documentation
├── .gitignore          # Git ignore files
└── .claude/
    └── commands/
        └── beat.md     # Claude slash command (optional)
```

### Main Files

- **`index.html`** : Web interface with embedded Strudel
  - Responsive design (mobile/tablet/desktop)
  - Automatic `pattern.js` monitoring
  - Manual code editor
  - Floating button to documentation

- **`pattern.js`** : Active pattern file
  - Contains Strudel code between `/* PATTERN_START */` and `/* PATTERN_END */`
  - Automatically modified by Claude Code
  - Monitored every 500ms by the interface

- **`.claude/commands/beat.md`** : Optional slash command
  - Allows using `/beat <prompt>` in Claude Code
  - Requires Claude Code restart to load
  - Alternative: use natural prompts directly

## 🎓 Strudel Syntax (Quick Reference)

```javascript
// Samples (drums)
s("bd sd hh")           // kick, snare, hihat

// Notes
note("c3 e3 g3").s("piano")

// Stacking (layers)
stack(
  s("bd*4"),            // kick 4 times
  s("hh*8")             // hihat 8 times
)

// Effects
.lpf(800)               // lowpass filter
.room(0.5)              // reverb
.gain(0.8)              // volume
.delay(0.3)             // delay

// Modulation
sine.range(200, 2000)   // oscillates between 200 and 2000
.fast(2)                // 2x faster
```

[Complete Strudel Documentation](https://strudel.cc)

## 🛠️ Technical Architecture

### Workflow

1. **Claude generates** Strudel code based on your prompt
2. **Code written** to `pattern.js` between `/* PATTERN_START */` and `/* PATTERN_END */` markers
3. **Monitoring**: JavaScript checks `pattern.js` every 500ms
4. **Detection**: If code changes, it's encoded in base64
5. **Update**: Strudel iframe reloads with new code in URL (`#<code-base64>`)
6. **Playback**: Sound updates automatically

### Why this approach?

- ✅ **Simple**: No complex backend needed
- ✅ **Reliable**: Uses official Strudel editor
- ✅ **Lightweight**: Vanilla HTML/JS only
- ✅ **Real-time**: Fast polling (500ms)

## 📱 Responsive Design

Interface adapts automatically:

- **Desktop** (> 1024px): Horizontal bar
- **Tablet** (769-1024px): Intermediate sizes
- **Mobile** (< 768px): Vertical bar, larger text
- **Small mobile** (< 480px): Ultra-compact

## 🐛 Troubleshooting

### Interface Issues

**"Pattern doesn't update"**
- ✅ Check local server is running (`python3 -m http.server 8000`)
- ✅ Check browser console (F12) for errors
- ✅ Verify `pattern.js` contains `/* PATTERN_START */` and `/* PATTERN_END */` markers
- ✅ Status at top should display "🎶 Updated: [time]"

**"No sound"**
- ✅ Click **PLAY ▶** in Strudel editor (top left)
- ✅ Check system volume
- ✅ Some browsers block audio before user interaction
- ✅ Test with simple pattern: `s("bd sd")`

**"Iframe doesn't load"**
- ✅ Check internet connection (Strudel.cc loads online)
- ✅ Try reloading page (Ctrl+R or Cmd+R)
- ✅ Temporarily disable ad/content blockers

### Claude Code Issues

**"Claude doesn't generate code"**
- ✅ Make sure project folder is open in Claude Code
- ✅ Be explicit: "generate a techno beat" rather than "make music"
- ✅ Claude should respond with generated code and confirm writing to `pattern.js`

**"/beat command doesn't work"**
- ✅ Restart Claude Code to load custom commands
- ✅ Alternative: use natural prompts (recommended)

**"Strudel syntax error"**
- ✅ Check Strudel console for errors
- ✅ Ask Claude to fix: "fix the error in the pattern"
- ✅ Use basic pattern to reset: `s("bd sd")`

## 🎨 Customization

### Modify Style

Edit CSS in `index.html` (lines 7-260):
- Colors: `#00ff41` (green), `#00ffff` (cyan)
- Animations: `@keyframes pulse`
- Layout: `.controls`, `#strudel-iframe`

### Change Update Frequency

In `index.html` line ~360:
```javascript
setInterval(checkUpdates, 500); // 500ms = 0.5 seconds
```

## 🚀 Future Improvements

- [ ] Multi-track mode
- [ ] Musical style presets
- [ ] WAV/MP3 audio export
- [ ] Pattern history
- [ ] URL sharing
- [ ] Real-time audio visualization

## 📄 License

MIT License - Use freely!

## 🙏 Credits

- [Strudel](https://strudel.cc) - Live coding audio for the web
- [Claude AI](https://anthropic.com) - Musical code generation
- Inspired by **Algorave** culture and **TidalCycles**

---

**Made with 💚 for the live coding scene**

🎵 Happy jamming!
